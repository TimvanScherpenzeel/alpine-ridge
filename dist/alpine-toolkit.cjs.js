"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var isRequestIdleCallbackSupported=!!window.requestIdleCallback||!1,isDoNotTrackEnabled=function(){var e=navigator.doNotTrack||!1;return!(!e||"unspecified"===e)}(),registerAnalytics=function(e){var t,r,n,o,i,a;void 0!==e&&/^ua-\d{4,9}-\d{1,4}$/i.test(e.toString())||console.warn('Analytics -> TrackingIdentifier expected to be of format "UA-XXXX-YY"'),isDoNotTrackEnabled?console.warn('Analytics -> "DoNotTrack" setting is enabled, avoided installing the analytics snippet'):(t=window,r=document,n="script",o="ga",t.GoogleAnalyticsObject=o,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,i=r.createElement(n),a=r.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a),ga("create",""+e,"auto"),ga("send","pageview"))},recordAnalyticsEvent=function(e){if(void 0===e&&(e={}),void 0!==window.ga&&"function"==typeof window.ga){if(Object.keys(e).length<=0)return void console.warn("Analytics -> Record cannot be empty");var t=function(){window.ga("send",e)};isRequestIdleCallbackSupported?window.requestIdleCallback(t):t()}};function mitt(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).slice().map(function(e){e(r)}),(e["*"]||[]).slice().map(function(e){e(t,r)})}}}var eventEmitter=new mitt,isUserActivationSupported=function(){try{return!!navigator.userActivation}catch(e){return!1}}(),autoplayAllowed=!1,isAutoplayAllowed=function(){return autoplayAllowed},createAudioContext=function(e){void 0===e&&(e=44100);var t=new(window.AudioContext||window.webkitAudioContext);if(/(iPhone|iPad)/i.test(navigator.userAgent)&&t.sampleRate!==e){var r=t.createBuffer(1,1,e),n=t.createBufferSource();n.buffer=r,n.connect(t.destination),n.start(0),n.disconnect(),t.close(),t=new(window.AudioContext||window.webkitAudioContext)}return t},unlockAutoplay=function(e){return new Promise(function(t,r){isUserActivationSupported&&!0===navigator.userActivation.hasBeenActive&&(autoplayAllowed=!0,t(!0));var n=createAudioContext();if("suspended"===n.state){autoplayAllowed=!1,eventEmitter.emit("ALPINE::AUTOPLAY_CHANGE",{autoplayAllowed:autoplayAllowed});var o=function(){n.resume().then(function(){e.removeEventListener("click",o),e.removeEventListener("touchstart",o),e.removeEventListener("touchend",o),autoplayAllowed=!0,eventEmitter.emit("ALPINE::AUTOPLAY_CHANGE",{autoplayAllowed:autoplayAllowed}),t(!0)}).catch(function(e){r(e)})};e.addEventListener("click",o,!1),e.addEventListener("touchstart",o,!1),e.addEventListener("touchend",o,!1)}else autoplayAllowed=!0,t(!0)})};class Store{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise((r,n)=>{const o=indexedDB.open(e,1);o.onerror=(()=>n(o.error)),o.onsuccess=(()=>r(o.result)),o.onupgradeneeded=(()=>{o.result.createObjectStore(t)})})}_withIDBStore(e,t){return this._dbp.then(r=>new Promise((n,o)=>{const i=r.transaction(this.storeName,e);i.oncomplete=(()=>n()),i.onabort=i.onerror=(()=>o(i.error)),t(i.objectStore(this.storeName))}))}}let store;function getDefaultStore(){return store||(store=new Store),store}function get(e,t=getDefaultStore()){let r;return t._withIDBStore("readonly",t=>{r=t.get(e)}).then(()=>r.result)}function set(e,t,r=getDefaultStore()){return r._withIDBStore("readwrite",r=>{r.put(t,e)})}function del(e,t=getDefaultStore()){return t._withIDBStore("readwrite",t=>{t.delete(e)})}function clear(e=getDefaultStore()){return e._withIDBStore("readwrite",e=>{e.clear()})}function keys(e=getDefaultStore()){const t=[];return e._withIDBStore("readonly",e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(()=>t)}var assert=function(e,t){if(!e)throw new Error("Assert -> Assertion failed"+(t?": "+t:""))},isAllowedAsKey=function(e){return"number"==typeof e||"string"==typeof e||!("object"!==e||!e||!(Array.isArray(e)||"setUTCFullYear"in e||"function"==typeof ArrayBuffer&&ArrayBuffer.isView(e)||"byteLength"in e&&"length"in e))},PersistentCache=function(){function e(e,t){void 0===e&&(e="persistent-cache-db"),void 0===t&&(t="persistent-cache-store"),this.memoryCache=new Map,this.store=new Store(e,t)}return e.prototype.set=function(e,t){var r=this;assert(isAllowedAsKey(e),"PersistentCache -> The given type of key is not allowed"),set(e,t,this.store).catch(function(n){console.warn("PersistentCache -> Set: { key: "+e+", value: "+t+" } has failed with error: "+n),r.memoryCache.set(e,t)})},e.prototype.get=function(e){var t=this;return assert(isAllowedAsKey(e),"PersistentCache -> The given type of key is not allowed"),new Promise(function(r){get(e,t.store).then(function(e){r(e)}).catch(function(r){console.warn("PersistentCache -> Get: { key: "+e+" } has failed with error: "+r),t.memoryCache.get(e)})})},e.prototype.getKeys=function(){var e=this;return new Promise(function(t){keys(e.store).then(function(e){t(e)}).catch(function(t){console.warn("PersistentCache -> Keys: { key: "+keys+" } has failed with error: "+t),e.memoryCache.keys()})})},e.prototype.delete=function(e){var t=this;assert(isAllowedAsKey(e),"PersistentCache -> The given type of key is not allowed"),del(e,this.store).catch(function(r){console.warn("PersistentCache -> Delete: { key: "+e+" } has failed with error: "+r),t.memoryCache.delete(e)})},e.prototype.clear=function(){var e=this;clear(this.store).catch(function(t){console.warn("PersistentCache -> Clear: Store clearing has failed with error: "+t),e.memoryCache.clear()})},e}(),isCookieEnabled=!!navigator.cookieEnabled||!1,setCookie=function(e,t,r){if(void 0===r&&(r=365),isCookieEnabled){var n=new Date;n.setTime(n.getTime()+864e5*r);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o+"; path=/; domain="+window.location.hostname.replace("www.","")+";"}else console.warn("Cookie -> Cookies are disabled, no cookie was set")},getCookie=function(e){if(isCookieEnabled){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}return console.warn("Cookie -> Cookies are disabled, no cookie was retrieved"),!1},deleteCookie=function(e){isCookieEnabled?document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+window.location.hostname.replace("www.",""):console.warn("Cookie -> Cookies are disabled, no cookie was deleted")};function onConnectionChange(){var e,t=navigator.onLine||!1,r=navigator.connection&&navigator.connection.effectiveType||"4g",n=navigator.connection&&navigator.connection.saveData||!1;if(t)switch(r){case"slow-2g":case"2g":e="CONNECTION_SPEED_1";break;case"3g":e="CONNECTION_SPEED_2";break;case"4g":default:e="CONNECTION_SPEED_3"}else e="CONNECTION_SPEED_0";eventEmitter.emit("ALPINE::CONNECTION_CHANGE",{connectionIsOnline:t,connectionSaveData:n,connectionSpeed:e})}var listenToConnectionChange=function(){navigator.connection&&navigator.connection.addEventListener("change",onConnectionChange,!1),window.addEventListener("offline",onConnectionChange),window.addEventListener("online",onConnectionChange)},stopListeningToConnectionChange=function(){window.removeEventListener("offline",onConnectionChange),window.removeEventListener("online",onConnectionChange)},debounce=function(e,t,r){var n;return void 0===r&&(r=!1),function(){var o=this,i=arguments,a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||e.apply(o,i)},t),a&&e.apply(o,i)}},debouncedOnOrientationChange=debounce(onOrientationChange,100);function onOrientationChange(){var e=window.innerWidth>window.innerHeight,t=!e;eventEmitter.emit("ALPINE::ORIENTATION_CHANGE",{isLandscape:e,isPortrait:t})}var listenToOrientationChange=function(){window.addEventListener("orientationchange",debouncedOnOrientationChange,!1)},stopListeningToOrientationChange=function(){window.removeEventListener("orientationchange",debouncedOnOrientationChange,!1)},key={hidden:0,visibilitychange:1},webkit=["webkitHidden","webkitvisibilitychange"],ms=["msHidden","msvisibilitychange"],prefix="hidden"in document&&Object.keys(key)||webkit[0]in document&&webkit||ms[0]in document&&ms||[],visibility={get hidden(){return Boolean(document[prefix[key.hidden]])},addEventListener:function(e,t,r){return document.addEventListener(prefix[key[e]],t,r)},removeEventListener:function(e,t,r){return document.removeEventListener(prefix[key[e]],t,r)},get onvisibilitychange(){return document[("on"+prefix[key.visibilitychange]).toLowerCase()]},set onvisibilitychange(e){document[("on"+prefix[key.visibilitychange]).toLowerCase()]=e}};function onVisibilityChange(){eventEmitter.emit("ALPINE::VISIBILITY_CHANGE",{isVisible:!visibility.hidden})}var listenToVisibilityChange=function(){visibility.addEventListener("visibilitychange",onVisibilityChange,!1)},stopListeningToVisibilityChange=function(){visibility.removeEventListener("visibilitychange",onVisibilityChange)},debouncedOnWindowSizeChange=debounce(onWindowSizeChange,100);function onWindowSizeChange(){eventEmitter.emit("ALPINE::WINDOW_SIZE_CHANGE",{windowHeight:window.innerHeight,windowWidth:window.innerWidth})}var listenToWindowSizeChange=function(){window.addEventListener("resize",debouncedOnWindowSizeChange,!1),window.addEventListener("orientationchange",debouncedOnWindowSizeChange,!1)},stopListeningToWindowSizeChange=function(){window.removeEventListener("resize",debouncedOnWindowSizeChange,!1),window.removeEventListener("orientationchange",debouncedOnWindowSizeChange,!1)},DetectUA=function(){function e(e){this.cache=new Map,this.userAgent=e||(window&&window.navigator?window.navigator.userAgent:""),this.android=!/like android/i.test(this.userAgent)&&/android/i.test(this.userAgent),this.iOS=this.match(1,/(iphone|ipod|ipad)/i).toLowerCase()}return e.prototype.match=function(e,t){var r=this.userAgent.match(t);return r&&r.length>1&&r[e]||""},Object.defineProperty(e.prototype,"isMobile",{get:function(){var e=this.cache.get("isMobile");return e||(!this.isTablet&&(/[^-]mobi/i.test(this.userAgent)||"iphone"===this.iOS||"ipod"===this.iOS||this.android||/nexus\s*[0-6]\s*/i.test(this.userAgent))?(this.cache.set("isMobile",!0),!0):(this.cache.set("isMobile",!1),!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTablet",{get:function(){var e=this.cache.get("isTablet");return e||(/tablet/i.test(this.userAgent)&&!/tablet pc/i.test(this.userAgent)||"ipad"===this.iOS||this.android&&!/[^-]mobi/i.test(this.userAgent)||!/nexus\s*[0-6]\s*/i.test(this.userAgent)&&/nexus\s*[0-9]+/i.test(this.userAgent)?(this.cache.set("isTablet",!0),!0):(this.cache.set("isTablet",!1),!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDesktop",{get:function(){var e=this.cache.get("isDesktop");if(e)return e;var t=!this.isMobile&&!this.isTablet;return this.cache.set("isDesktop",t),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isiOS",{get:function(){var e=this.cache.get("isiOS");return e||!!this.iOS&&{name:"iOS",version:this.match(1,/os (\d+([_\s]\d+)*) like mac os x/i).replace(/[_\s]/g,".")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAndroid",{get:function(){var e=this.cache.get("isAndroid");return e||!!this.android&&{name:"Android",version:this.match(1,/android[ \/-](\d+(\.\d+)*)/i)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browser",{get:function(){var e=this.cache.get("browser");if(e)return e;var t=this.match(1,/version\/(\d+(\.\d+)?)/i),r=void 0;return r=/opera/i.test(this.userAgent)?{name:"Opera",version:t||this.match(1,/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(this.userAgent)?{name:"Opera",version:this.match(1,/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||t}:/SamsungBrowser/i.test(this.userAgent)?{name:"Samsung Internet for Android",version:t||this.match(1,/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(this.userAgent)?{name:"Yandex Browser",version:t||this.match(1,/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(this.userAgent)?{name:"UC Browser",version:this.match(1,/(?:ucbrowser)[\s\/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(this.userAgent)?{name:"Internet Explorer",version:this.match(1,/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(this.userAgent)?{name:"Microsoft Edge",version:this.match(2,/edg([ea]|ios)\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(this.userAgent)?{name:"Firefox",version:this.match(1,/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)}:/chromium/i.test(this.userAgent)?{name:"Chromium",version:this.match(1,/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||t}:/chrome|crios|crmo/i.test(this.userAgent)?{name:"Chrome",version:this.match(1,/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/safari|applewebkit/i.test(this.userAgent)?{name:"Safari",version:t}:{name:this.match(1,/^(.*)\/(.*) /),version:this.match(2,/^(.*)\/(.*) /)},this.cache.set("browser",r),r},enumerable:!0,configurable:!0}),e}(),device=new DetectUA,isMobile=device.isMobile,isTablet=device.isTablet,isDesktop=device.isDesktop,isiOS=device.isiOS,isAndroid=device.isAndroid,browser=device.browser,isChrome="object"==typeof browser&&"Chrome"===browser.name,isFirefox="object"==typeof browser&&"Firefox"===browser.name,isSafari="object"==typeof browser&&"Safari"===browser.name,isEdge="object"==typeof browser&&"Microsoft Edge"===browser.name,isInternetExplorer="object"==typeof browser&&"Internet Explorer"===browser.name,isOpera="object"==typeof browser&&"Opera"===browser.name,isSamsungBrowser="object"==typeof browser&&"Samsung Internet for Android"===browser.name,isYandexBrowser="object"==typeof browser&&"Yandex Browser"===browser.name,isUCBrowser="object"==typeof browser&&"UC Browser"===browser.name,isChromium="object"==typeof browser&&"Chromium"===browser.name,getBrowserType={isDesktop:isDesktop,isMobile:isMobile,isTablet:isTablet,isAndroid:isAndroid,isiOS:isiOS,isChrome:isChrome,isChromium:isChromium,isEdge:isEdge,isFirefox:isFirefox,isInternetExplorer:isInternetExplorer,isOpera:isOpera,isSafari:isSafari,isSamsungBrowser:isSamsungBrowser,isUCBrowser:isUCBrowser,isYandexBrowser:isYandexBrowser,browserName:"object"==typeof browser&&browser.name||"",browserVersion:"object"==typeof browser&&browser.version||""},getMediaFeatures=function(){var e=new Audio,t=document.createElement("video");function r(e,t){var r=e.canPlayType(t);return!("probably"!==r&&"maybe"!==r)}return{audio:{MP3:r(e,"audio/mpeg"),Ogg:r(e,"audio/ogg"),WAV:r(e,"audio/wav")},video:{HLS:r(t,"application/vnd.apple.mpegURL")||r(t,"application/x-mpegurl"),MP4:r(t,"video/mp4"),Ogg:r(t,"video/ogg"),WebM:r(t,"video/webm")}}}();const GL_ALIASED_POINT_SIZE_RANGE=33901,GL_ALIASED_LINE_WIDTH_RANGE=33902,GL_MAX_TEXTURE_SIZE=3379,GL_MAX_VIEWPORT_DIMS=3386,GL_SUBPIXEL_BITS=3408,GL_RED_BITS=3410,GL_GREEN_BITS=3411,GL_BLUE_BITS=3412,GL_ALPHA_BITS=3413,GL_DEPTH_BITS=3414,GL_STENCIL_BITS=3415,GL_VENDOR=7936,GL_RENDERER=7937,GL_VERSION=7938,GL_STENCIL_TEST=2960,GL_FRAGMENT_SHADER=35632,GL_VERTEX_SHADER=35633,GL_MAX_VERTEX_ATTRIBS=34921,GL_MAX_VERTEX_UNIFORM_VECTORS=36347,GL_MAX_VARYING_VECTORS=36348,GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,GL_MAX_TEXTURE_IMAGE_UNITS=34930,GL_MAX_FRAGMENT_UNIFORM_VECTORS=36349,GL_SHADING_LANGUAGE_VERSION=35724,GL_MAX_CUBE_MAP_TEXTURE_SIZE=34076,GL_LOW_FLOAT=36336,GL_MEDIUM_FLOAT=36337,GL_HIGH_FLOAT=36338,GL_MAX_RENDERBUFFER_SIZE=34024,GL_MAX_3D_TEXTURE_SIZE=32883,GL_MAX_ELEMENTS_VERTICES=33e3,GL_MAX_ELEMENTS_INDICES=33001,GL_MAX_TEXTURE_LOD_BIAS=34045,GL_MAX_FRAGMENT_UNIFORM_COMPONENTS=35657,GL_MAX_VERTEX_UNIFORM_COMPONENTS=35658,GL_MAX_ARRAY_TEXTURE_LAYERS=35071,GL_MIN_PROGRAM_TEXEL_OFFSET=35076,GL_MAX_PROGRAM_TEXEL_OFFSET=35077,GL_MAX_VARYING_COMPONENTS=35659,GL_MAX_VERTEX_OUTPUT_COMPONENTS=37154,GL_MAX_FRAGMENT_INPUT_COMPONENTS=37157,GL_MAX_SERVER_WAIT_TIMEOUT=37137,GL_MAX_ELEMENT_INDEX=36203,GL_MAX_DRAW_BUFFERS=34852,GL_MAX_COLOR_ATTACHMENTS=36063,GL_MAX_SAMPLES=36183,GL_MAX_VERTEX_UNIFORM_BLOCKS=35371,GL_MAX_FRAGMENT_UNIFORM_BLOCKS=35373,GL_MAX_COMBINED_UNIFORM_BLOCKS=35374,GL_MAX_UNIFORM_BUFFER_BINDINGS=35375,GL_MAX_UNIFORM_BLOCK_SIZE=35376,GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380,GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447;var getWebGL2Features=function(){var e=document.createElement("canvas").getContext("webgl2",{stencil:!0});if(!(e&&e instanceof WebGL2RenderingContext))return!1;var t=e.getExtension("WEBGL_debug_renderer_info");e.enable(2960);var r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");return{base:{renderer:e.getParameter(7937),rendererUnmasked:t&&e.getParameter(t.UNMASKED_RENDERER_WEBGL),shaderVersion:e.getParameter(35724),vendor:e.getParameter(7936),vendorUnmasked:t&&e.getParameter(t.UNMASKED_VENDOR_WEBGL),version:e.getParameter(7938)},general:{aliasedLineWidthRange:e.getParameter(33902).toString(),aliasedPointSizeRange:e.getParameter(33901).toString(),alphaBits:e.getParameter(3413),antialias:!!e.getContextAttributes().antialias,blueBits:e.getParameter(3412),depthBits:e.getParameter(3414),greenBits:e.getParameter(3411),maxCombinedTextureImageUnits:e.getParameter(35661),maxCubeMapTextureSize:e.getParameter(34076),maxFragmentUniformVectors:e.getParameter(36349),maxRenderBufferSize:e.getParameter(34024),maxTextureImageUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxVaryingVectors:e.getParameter(36348),maxVertexAttributes:e.getParameter(34921),maxVertexTextureImageUnits:e.getParameter(35660),maxVertexUniformVectors:e.getParameter(36347),maxViewportDimensions:e.getParameter(3386).toString(),precision:{fragmentShaderHighPrecision:[e.getShaderPrecisionFormat(35632,36338).rangeMin,e.getShaderPrecisionFormat(35632,36338).rangeMax,e.getShaderPrecisionFormat(35632,36338).precision].toString(),fragmentShaderLowPrecision:[e.getShaderPrecisionFormat(35632,36336).rangeMin,e.getShaderPrecisionFormat(35632,36336).rangeMax,e.getShaderPrecisionFormat(35632,36336).precision].toString(),fragmentShaderMediumPrecision:[e.getShaderPrecisionFormat(35632,36337).rangeMin,e.getShaderPrecisionFormat(35632,36337).rangeMax,e.getShaderPrecisionFormat(35632,36337).precision].toString(),vertexShaderHighPrecision:[e.getShaderPrecisionFormat(35633,36338).rangeMin,e.getShaderPrecisionFormat(35633,36338).rangeMax,e.getShaderPrecisionFormat(35633,36338).precision].toString(),vertexShaderLowPrecision:[e.getShaderPrecisionFormat(35633,36336).rangeMin,e.getShaderPrecisionFormat(35633,36336).rangeMax,e.getShaderPrecisionFormat(35633,36336).precision].toString(),vertexShaderMediumPrecision:[e.getShaderPrecisionFormat(35633,36337).rangeMin,e.getShaderPrecisionFormat(35633,36337).rangeMax,e.getShaderPrecisionFormat(35633,36337).precision].toString()},redBits:e.getParameter(3410),stencilBits:e.getParameter(3415),subPixelBits:e.getParameter(3408)},extensions:{maxAnisotropy:r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,supportedExtensions:e.getSupportedExtensions(),compressedTextureASTCExtension:e.getExtension("WEBGL_compressed_texture_astc")||null,compressedTextureATCExtension:e.getExtension("WEBGL_compressed_texture_atc")||null,compressedTextureETC1Extension:e.getExtension("WEBGL_compressed_texture_etc1")||null,compressedTextureETCExtension:e.getExtension("WEBGL_compressed_texture_etc")||null,compressedTexturePVRTCExtension:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc")||null,compressedTextureS3TCExtension:e.getExtension("WEBGL_compressed_texture_s3tc")||null,compressedTextureS3TCSRGBExtension:e.getExtension("WEBGL_compressed_texture_s3tc_srgb")||null},specific:{max3DTextureSize:e.getParameter(32883),maxArrayTextureLayers:e.getParameter(35071),maxClientWaitTimeout:e.getParameter(37447),maxColorAttachments:e.getParameter(36063),maxCombinedFragmentUniformComponents:e.getParameter(e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS),maxCombinedUniformBlocks:e.getParameter(35374),maxCombinedVertexUniformComponents:e.getParameter(e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS),maxDrawBuffers:e.getParameter(34852),maxElementIndex:e.getParameter(36203),maxElementsIndices:e.getParameter(33001),maxElementsVertices:e.getParameter(33e3),maxFragmentInputComponents:e.getParameter(37157),maxFragmentUniformBlocks:e.getParameter(35373),maxFragmentUniformComponents:e.getParameter(35657),maxProgramTexelOffset:e.getParameter(35077),maxSamples:e.getParameter(36183),maxServerWaitTimeout:e.getParameter(37137),maxTextureLODBias:e.getParameter(34045),maxTransformFeedbackInterleavedComponents:e.getParameter(e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS),maxTransformFeedbackSeparateAttribs:e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS),maxTransformFeedbackSeparateComponents:e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS),maxUniformBlockSize:e.getParameter(35376),maxUniformBufferBindings:e.getParameter(35375),maxVaryingComponents:e.getParameter(35659),maxVertexOutputComponents:e.getParameter(37154),maxVertexUniformBlocks:e.getParameter(35371),maxVertexUniformComponents:e.getParameter(35658),minProgramTexelOffset:e.getParameter(35076),uniformBufferOffsetAlignment:e.getParameter(35380)}}},getWebGLFeatures=function(){var e={stencil:!0},t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!(r&&r instanceof WebGLRenderingContext))return!1;var n=r.getExtension("WEBGL_debug_renderer_info");r.enable(2960);var o=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic"),i=r.getExtension("WEBGL_draw_buffers");return{base:{renderer:r.getParameter(7937),rendererUnmasked:n&&r.getParameter(n.UNMASKED_RENDERER_WEBGL),shaderVersion:r.getParameter(35724),vendor:r.getParameter(7936),vendorUnmasked:n&&r.getParameter(n.UNMASKED_VENDOR_WEBGL),version:r.getParameter(7938)},general:{aliasedLineWidthRange:r.getParameter(33902).toString(),aliasedPointSizeRange:r.getParameter(33901).toString(),alphaBits:r.getParameter(3413),antialias:!!r.getContextAttributes().antialias,blueBits:r.getParameter(3412),depthBits:r.getParameter(3414),greenBits:r.getParameter(3411),maxCombinedTextureImageUnits:r.getParameter(35661),maxCubeMapTextureSize:r.getParameter(34076),maxFragmentUniformVectors:r.getParameter(36349),maxRenderBufferSize:r.getParameter(34024),maxTextureImageUnits:r.getParameter(34930),maxTextureSize:r.getParameter(3379),maxVaryingVectors:r.getParameter(36348),maxVertexAttributes:r.getParameter(34921),maxVertexTextureImageUnits:r.getParameter(35660),maxVertexUniformVectors:r.getParameter(36347),maxViewportDimensions:r.getParameter(3386).toString(),precision:{fragmentShaderHighPrecision:[r.getShaderPrecisionFormat(35632,36338).rangeMin,r.getShaderPrecisionFormat(35632,36338).rangeMax,r.getShaderPrecisionFormat(35632,36338).precision].toString(),fragmentShaderLowPrecision:[r.getShaderPrecisionFormat(35632,36336).rangeMin,r.getShaderPrecisionFormat(35632,36336).rangeMax,r.getShaderPrecisionFormat(35632,36336).precision].toString(),fragmentShaderMediumPrecision:[r.getShaderPrecisionFormat(35632,36337).rangeMin,r.getShaderPrecisionFormat(35632,36337).rangeMax,r.getShaderPrecisionFormat(35632,36337).precision].toString(),vertexShaderHighPrecision:[r.getShaderPrecisionFormat(35633,36338).rangeMin,r.getShaderPrecisionFormat(35633,36338).rangeMax,r.getShaderPrecisionFormat(35633,36338).precision].toString(),vertexShaderLowPrecision:[r.getShaderPrecisionFormat(35633,36336).rangeMin,r.getShaderPrecisionFormat(35633,36336).rangeMax,r.getShaderPrecisionFormat(35633,36336).precision].toString(),vertexShaderMediumPrecision:[r.getShaderPrecisionFormat(35633,36337).rangeMin,r.getShaderPrecisionFormat(35633,36337).rangeMax,r.getShaderPrecisionFormat(35633,36337).precision].toString()},redBits:r.getParameter(3410),stencilBits:r.getParameter(3415),subPixelBits:r.getParameter(3408)},extensions:{maxAnisotropy:o?r.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,maxDrawBuffers:i?r.getParameter(i.MAX_DRAW_BUFFERS_WEBGL):0,supportedExtensions:r.getSupportedExtensions(),compressedTextureASTCExtension:r.getExtension("WEBGL_compressed_texture_astc")||null,compressedTextureATCExtension:r.getExtension("WEBGL_compressed_texture_atc")||null,compressedTextureETC1Extension:r.getExtension("WEBGL_compressed_texture_etc1")||null,compressedTextureETCExtension:r.getExtension("WEBGL_compressed_texture_etc")||null,compressedTexturePVRTCExtension:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc")||null,compressedTextureS3TCExtension:r.getExtension("WEBGL_compressed_texture_s3tc")||null,compressedTextureS3TCSRGBExtension:r.getExtension("WEBGL_compressed_texture_s3tc_srgb")||null}}}(),isAnimationWorkletSupported=!!window.CSS&&!!window.CSS.animationWorklet||!1,isAudioWorkletSupported=!!window.AudioWorklet||!1,isBroadcastChannelSupported=!!window.BroadcastChannel||!1,isFetchSupported=!!window.fetch||!1,isGamepadSupported=!!window.Gamepad||!1,isImageBitmapSupported=!!window.ImageBitmap&&!!window.createImageBitmap||!1,isImageDecodeSupported=function(){try{return!!(new Image).decode}catch(e){return!1}}(),isIndexedDBSupported=function(){try{return!!window.indexedDB}catch(e){return!1}}(),isIntersectionObserverSupported=!!window.IntersectionObserver||!1,isLayoutWorkletSupported=!!window.CSS&&!!window.CSS.layoutWorklet||!1,isLocalStorageSupported=function(){try{return!!window.localStorage}catch(e){return!1}}(),isMutationObserverSupported=!!window.MutationObserver||!1,isOffscreenCanvasSupported=!!window.OffscreenCanvas||!1,isPaintWorkletSupported=!!window.CSS&&!!window.CSS.paintWorklet||!1,isPerformanceNowSupported=!(!window.performance||!window.performance.now)||!1,isPerformanceObserverSupported=!!window.PerformanceObserver||!1,isServiceWorkerSupported=!!navigator.serviceWorker||!1,isSessionStorageSupported=function(){try{return!!window.sessionStorage}catch(e){return!1}}(),isWebAssemblySupported=!!window.WebAssembly||!1,isWebAudioSupported=!!window.AudioContext||!!window.webkitAudioContext||!1,isWebGL2Supported=function(){var e=document.createElement("canvas").getContext("webgl2");return e&&e instanceof WebGL2RenderingContext||!1},isWebGLSupported=function(){var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t&&t instanceof WebGLRenderingContext||!1}(),isWebPSupported=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp")}(),isWebRTCSupported=!!(window.RTCPeerConnection&&window.RTCDataChannelEvent||window.webkitRTCPeerConnection||window.mozRTCPeerConnection||window.msRTCPeerConnection||window.oRTCPeerConnection),isWebSocketSupported=!!window.WebSocket||!1,isWebVRSupported=!!navigator.getVRDisplays||!1,isWebWorkerInlineSupported=function(){try{var e=window.URL||window.webkitURL;if(void 0===e||void 0===window.Blob||void 0===window.Worker)return!1;var t=new Blob([""]),r=e.createObjectURL(t),n=new Worker(r);return e.revokeObjectURL(r),!!n&&(n.terminate(),!0)}catch(e){return!1}}(),isWebWorkerSupported=!!window.Worker||!1,isWebXRSupported=!!navigator.xr||!1,getAvailableCPUCoreCount=navigator.hardwareConcurrency||0,getDevicePixelRatio=window.devicePixelRatio||1,getEndianness=function(){if(null!==window.ArrayBuffer){var e=new ArrayBuffer(4),t=new Uint32Array(e),r=new Uint8Array(e);return t[0]=1,1===r[0]?"little":"big"}return"Unknown"}(),features={browserFeatures:{browserType:getBrowserType,isAnimationWorkletSupported:isAnimationWorkletSupported,isAudioWorkletSupported:isAudioWorkletSupported,isBroadcastChannelSupported:isBroadcastChannelSupported,isFetchSupported:isFetchSupported,isGamepadSupported:isGamepadSupported,isImageBitmapSupported:isImageBitmapSupported,isImageDecodeSupported:isImageDecodeSupported,isIndexedDBSupported:isIndexedDBSupported,isIntersectionObserverSupported:isIntersectionObserverSupported,isLayoutWorkletSupported:isLayoutWorkletSupported,isLocalStorageSupported:isLocalStorageSupported,isMutationObserverSupported:isMutationObserverSupported,isOffscreenCanvasSupported:isOffscreenCanvasSupported,isPaintWorkletSupported:isPaintWorkletSupported,isPerformanceNowSupported:isPerformanceNowSupported,isPerformanceObserverSupported:isPerformanceObserverSupported,isRequestIdleCallbackSupported:isRequestIdleCallbackSupported,isServiceWorkerSupported:isServiceWorkerSupported,isSessionStorageSupported:isSessionStorageSupported,isUserActivationSupported:isUserActivationSupported,isWebAssemblySupported:isWebAssemblySupported,isWebAudioSupported:isWebAudioSupported,isWebGL2Supported:isWebGL2Supported(),isWebGLSupported:isWebGLSupported,isWebPSupported:isWebPSupported,isWebRTCSupported:isWebRTCSupported,isWebSocketSupported:isWebSocketSupported,isWebVRSupported:isWebVRSupported,isWebWorkerInlineSupported:isWebWorkerInlineSupported,isWebWorkerSupported:isWebWorkerSupported,isWebXRSupported:isWebXRSupported,mediaFeatures:getMediaFeatures,webGL2Features:getWebGL2Features(),webGLFeatures:getWebGLFeatures},browserSettings:{isCookieEnabled:isCookieEnabled,isDoNotTrackEnabled:isDoNotTrackEnabled},hardwareFeatures:{availableCPUCores:getAvailableCPUCoreCount,devicePixelRatio:getDevicePixelRatio,endianness:getEndianness}},__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}var styles={maxWidth:"none",display:"inline-block",position:"absolute",height:"100%",width:"100%",overflow:"scroll",fontSize:"16px"},collapsibleInnerStyles={display:"inline-block",height:"200%",width:"200%",fontSize:"16px",maxWidth:"none"},fontStyle={maxWidth:"none",minWidth:"20px",minHeight:"20px",display:"inline-block",overflow:"hidden",position:"absolute",width:"auto",margin:"0",padding:"0",top:"-999px",whiteSpace:"nowrap",fontSynthesis:"none"},Ruler=function(){function e(t){_classCallCheck(this,e),this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(t)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.lastOffsetWidth=-1,Object.assign(this.collapsible.style,styles),Object.assign(this.expandable.style,styles),Object.assign(this.expandableInner.style,styles),Object.assign(this.collapsibleInner.style,collapsibleInnerStyles),this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return _createClass(e,[{key:"getElement",value:function(){return this.element}},{key:"setFont",value:function(e){Object.assign(this.element.style,_objectSpread({},fontStyle,{font:e}))}},{key:"getWidth",value:function(){return this.element.offsetWidth}},{key:"setWidth",value:function(e){this.element.style.width=e+"px"}},{key:"reset",value:function(){var e=this.getWidth(),t=e+100;return this.expandableInner.style.width=t+"px",this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e&&(this.lastOffsetWidth=e,!0)}},{key:"onScroll",value:function(e){this.reset()&&null!==this.element.parentNode&&e(this.lastOffsetWidth)}},{key:"onResize",value:function(e){var t=this;function r(){t.onScroll(e)}this.collapsible.addEventListener("scroll",r),this.expandable.addEventListener("scroll",r),this.reset()}}]),e}();function onReady(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())})}var FontFaceObserver=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,e),this.family=t,this.style=r.style||"normal",this.weight=r.weight||"normal",this.stretch=r.stretch||"normal",this}return _createClass(e,null,[{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getNavigatorVendor",value:function(){return window.navigator.vendor}},{key:"hasWebKitFallbackBug",value:function(){if(null===e.HAS_WEBKIT_FALLBACK_BUG){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_WEBKIT_FALLBACK_BUG=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return e.HAS_WEBKIT_FALLBACK_BUG}},{key:"hasSafari10Bug",value:function(){if(null===e.HAS_SAFARI_10_BUG)if(e.supportsNativeFontLoading()&&/Apple/.test(e.getNavigatorVendor())){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_SAFARI_10_BUG=!!t&&parseInt(t[1],10)<603}else e.HAS_SAFARI_10_BUG=!1;return e.HAS_SAFARI_10_BUG}},{key:"supportsNativeFontLoading",value:function(){return null===e.SUPPORTS_NATIVE_FONT_LOADING&&(e.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),e.SUPPORTS_NATIVE_FONT_LOADING}},{key:"supportStretch",value:function(){if(null===e.SUPPORTS_STRETCH){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(e){}e.SUPPORTS_STRETCH=""!==t.style.font}return e.SUPPORTS_STRETCH}}]),_createClass(e,[{key:"load",value:function(t,r){var n=this,o=t||"BESbswy",i=0,a=r||e.DEFAULT_TIMEOUT,s=n.getTime();return new Promise(function(t,r){if(e.supportsNativeFontLoading()&&!e.hasSafari10Bug()){var c=new Promise(function(e,t){!function r(){n.getTime()-s>=a?t(new Error(a+"ms timeout exceeded")):document.fonts.load(n.getStyle('"'+n.family+'"'),o).then(function(t){t.length>=1?e():setTimeout(r,25)},t)}()}),d=new Promise(function(e,t){i=setTimeout(function(){t(new Error(a+"ms timeout exceeded"))},a)});Promise.race([d,c]).then(function(){clearTimeout(i),t(n)},r)}else onReady(function(){var c=new Ruler(o),d=new Ruler(o),u=new Ruler(o),l=-1,m=-1,p=-1,g=-1,f=-1,h=-1,E=document.createElement("div");function S(){null!==E.parentNode&&E.parentNode.removeChild(E)}function b(){if((-1!=l&&-1!=m||-1!=l&&-1!=p||-1!=m&&-1!=p)&&(l==m||l==p||m==p)){if(e.hasWebKitFallbackBug()&&(l==g&&m==g&&p==g||l==f&&m==f&&p==f||l==h&&m==h&&p==h))return;S(),clearTimeout(i),t(n)}}E.dir="ltr",c.setFont(n.getStyle("sans-serif")),d.setFont(n.getStyle("serif")),u.setFont(n.getStyle("monospace")),E.appendChild(c.getElement()),E.appendChild(d.getElement()),E.appendChild(u.getElement()),document.body.appendChild(E),g=c.getWidth(),f=d.getWidth(),h=u.getWidth(),function e(){if(n.getTime()-s>=a)S(),r(new Error(a+"ms timeout exceeded"));else{var t=document.hidden;!0!==t&&void 0!==t||(l=c.getWidth(),m=d.getWidth(),p=u.getWidth(),b()),i=setTimeout(e,50)}}(),c.onResize(function(e){l=e,b()}),c.setFont(n.getStyle('"'+n.family+'",sans-serif')),d.onResize(function(e){m=e,b()}),d.setFont(n.getStyle('"'+n.family+'",serif')),u.onResize(function(e){p=e,b()}),u.setFont(n.getStyle('"'+n.family+'",monospace'))})})}},{key:"getStyle",value:function(t){return[this.style,this.weight,e.supportStretch()?this.stretch:"","100px",t].join(" ")}},{key:"getTime",value:function(){return(new Date).getTime()}}]),e}();_defineProperty(FontFaceObserver,"Ruler",Ruler),_defineProperty(FontFaceObserver,"HAS_WEBKIT_FALLBACK_BUG",null),_defineProperty(FontFaceObserver,"HAS_SAFARI_10_BUG",null),_defineProperty(FontFaceObserver,"SUPPORTS_STRETCH",null),_defineProperty(FontFaceObserver,"SUPPORTS_NATIVE_FONT_LOADING",null),_defineProperty(FontFaceObserver,"DEFAULT_TIMEOUT",3e3);for(var convertArrayBufferToBlob=function(e,t){return new Blob([e],{type:t})},convertBlobToArrayBuffer=function(e){return new Promise(function(t,r){var n=new FileReader;n.addEventListener("loadend",function(e){t(n.result)}),n.addEventListener("error",r),n.readAsArrayBuffer(e)})},getRandomValuesInterface="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),getRandomValues=function(){if(getRandomValuesInterface){var e=new Uint8Array(16);return getRandomValuesInterface(e),e}e=new Array(16);for(var t=0,r=0;r<16;r++)0==(3&r)&&(t=4294967296*Math.random()),e[r]=t>>>((3&r)<<3)&255;return e},hex=[],i=0;i<256;i++)hex[i]=(i+256).toString(16).substr(1);var ELoaderKey,createUUID=function(){var e=getRandomValues();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,hex[e[0]]+hex[e[1]]+hex[e[2]]+hex[e[3]]+"-"+hex[e[4]]+hex[e[5]]+"-"+hex[e[6]]+hex[e[7]]+"-"+hex[e[8]]+hex[e[9]]+"-"+hex[e[10]]+hex[e[11]]+hex[e[12]]+hex[e[13]]+hex[e[14]]+hex[e[15]]},getQueryParameters=function(e){return void 0===e&&(e=window.location.search),e.slice(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var r=t[0],n=t[1];return e[r]=n,e},{})};!function(e){e.ArrayBuffer="ArrayBuffer",e.Audio="Audio",e.Blob="Blob",e.Font="Font",e.Image="Image",e.ImageBitmap="ImageBitmap",e.ImageCompressed="ImageCompressed",e.JSON="JSON",e.Text="Text",e.Video="Video",e.WebAssembly="WebAssembly",e.XML="XML"}(ELoaderKey||(ELoaderKey={}));var LOADER_EXTENSIONS_MAP=new Map([[ELoaderKey.Audio,{extensions:["mp3","ogg","wav","flac"]}],[ELoaderKey.Font,{extensions:["woff2","woff","ttf","otf","eot"]}],[ELoaderKey.Image,{extensions:["jpeg","jpg","gif","png","webp"]}],[ELoaderKey.ImageBitmap,{extensions:["jpeg","jpg","gif","png","webp"]}],[ELoaderKey.ImageCompressed,{extensions:["ktx"]}],[ELoaderKey.JSON,{extensions:["json"]}],[ELoaderKey.Text,{extensions:["txt"]}],[ELoaderKey.Video,{extensions:["webm","ogg","mp4"]}],[ELoaderKey.WebAssembly,{extensions:["wasm","wat"]}],[ELoaderKey.XML,{defaultMimeType:"text/xml",extensions:["xml","svg","html"],mimeType:{html:"text/html",svg:"image/svg+xml",xml:"text/xml"}}]]),IS_MEDIA_PRELOAD_SUPPORTED=!getBrowserType.isSafari,AssetLoader=function(){function e(){var t=this;this.assets=new Map,this.loadAssets=function(r){var n=r.filter(function(e){return e}).map(function(r){var n=window.performance.now();return new Promise(function(o){var i,a=t.assets.get(r.src);switch(a&&o({fromCache:!0,id:r.id||r.src,item:a,timeToLoad:window.performance.now()-n}),r.loader||e.getLoaderByFileExtension(r.src)){case ELoaderKey.ArrayBuffer:i=e.loadArrayBuffer(r);break;case ELoaderKey.Audio:i=e.loadAudio(r);break;case ELoaderKey.Blob:i=e.loadBlob(r);break;case ELoaderKey.Font:i=e.loadFont(r);break;case ELoaderKey.Image:i=e.loadImage(r);break;case ELoaderKey.ImageBitmap:i=e.loadImageBitmap(r);break;case ELoaderKey.ImageCompressed:i=e.loadImageCompressed(r);break;case ELoaderKey.JSON:i=e.loadJSON(r);break;case ELoaderKey.Text:i=e.loadText(r);break;case ELoaderKey.Video:i=e.loadVideo(r);break;case ELoaderKey.WebAssembly:i=e.loadWebAssembly(r);break;case ELoaderKey.XML:i=e.loadXML(r);break;default:console.warn("Missing loader, falling back to loading as ArrayBuffer"),i=e.loadArrayBuffer(r)}i.then(function(e){t.assets.set(r.src,e),o({fromCache:!1,id:r.id||r.src,item:e,timeToLoad:window.performance.now()-n})})})}),o=Promise.all(n),i=0;return n.forEach(function(e){return e.then(function(e){i++,eventEmitter.emit("ALPINE::ASSET_LOADED",{id:e.id,progress:""+(i/n.length).toFixed(2),timeToLoad:e.timeToLoad.toFixed(2)+"ms"})})}),o.then(function(e){var t=new Map;return e.forEach(function(e){t.get(e.id)&&console.warn("Detected duplicate id, please use unique id's"),t.set(e.id,e.item)}),t})}}return e.byDeviceType=function(e){return e.DESKTOP&&getBrowserType.isDesktop?e.DESKTOP:e.TABLET&&getBrowserType.isTablet?e.TABLET:e.MOBILE},e.bySupportedCompressedTexture=function(e){return getWebGLFeatures?e.ASTC&&getWebGLFeatures.extensions.compressedTextureASTCExtension?e.ASTC:e.ETC&&getWebGLFeatures.extensions.compressedTextureETCExtension?e.S3TC:e.PVRTC&&getWebGLFeatures.extensions.compressedTexturePVRTCExtension?e.PVRTC:e.S3TC&&getWebGLFeatures.extensions.compressedTextureS3TCExtension?e.S3TC:e.FALLBACK:e.FALLBACK},e.domParser=new DOMParser,e.getFileExtension=function(e){var t=e.split(/[\\\/]/).pop();if(!t)return"";var r=t.lastIndexOf(".");return r<1?"":t.slice(r+1)},e.getMimeType=function(e,t){var r=LOADER_EXTENSIONS_MAP.get(e);return r.mimeType[t]||r.defaultMimeType},e.getLoaderByFileExtension=function(t){var r=e.getFileExtension(t),n=Array.from(LOADER_EXTENSIONS_MAP).find(function(e){return e[1].extensions.includes(r)});return n?n[0]:ELoaderKey.ArrayBuffer},e.fetchItem=function(e){return fetch(e.src,e.options||{})},e.loadArrayBuffer=function(t){return e.fetchItem(t).then(function(e){return e.arrayBuffer()}).catch(function(e){console.warn(e)})},e.loadAudio=function(t){return e.fetchItem(t).then(function(e){return e.blob()}).then(function(e){return new Promise(function(t,r){var n=document.createElement("audio");n.preload="auto",n.autoplay=!1,IS_MEDIA_PRELOAD_SUPPORTED&&(n.addEventListener("canplaythrough",function e(){n.removeEventListener("canplaythrough",e),URL.revokeObjectURL(n.src),t(n)}),n.addEventListener("error",function e(){n.removeEventListener("error",e),URL.revokeObjectURL(n.src),r(n)})),n.src=URL.createObjectURL(e),IS_MEDIA_PRELOAD_SUPPORTED||(n.load(),t(n))})}).catch(function(e){console.warn(e)})},e.loadBlob=function(t){return e.fetchItem(t).then(function(e){return e.blob()}).catch(function(e){console.warn(e)})},e.loadFont=function(e){return new FontFaceObserver(e.id,e.options||{}).load()},e.loadImage=function(e){return new Promise(function(t,r){var n=new Image;isImageDecodeSupported?(n.src=e.src,n.decode().then(function(){t(n)}).catch(function(e){r(e)})):(n.onload=function(){t(n)},n.onerror=function(e){r(e)},n.src=e.src)})},e.loadImageBitmap=function(t){return isImageBitmapSupported?e.loadBlob(t).then(function(r){if(r){if(t.loaderOptions){var n=t.loaderOptions,o=n.sx,i=n.sy,a=n.sw,s=n.sh,c=n.options;return void 0!==o&&void 0!==i&&void 0!==a&&void 0!==s?void 0!==c?createImageBitmap(r,o,i,a,s,c):createImageBitmap(r,o,i,a,s):void 0!==c?createImageBitmap(r,c):createImageBitmap(r)}return createImageBitmap(r)}return console.warn("Received no or corrupt data, falling back to default image loader"),e.loadImage(t)}):e.loadImage(t)},e.loadImageCompressed=function(t){return e.loadArrayBuffer(t).then(function(e){if(e){var t=function(e){return(255&e)<<24|(65280&e)<<8|e>>8&65280|e>>24&255},r=new Uint8Array(e,0,12);assert(171===r[0]||75===r[1]||84===r[2]||88===r[3]||32===r[4]||49===r[5]||49===r[6]||187===r[7]||13===r[8]||10===r[9]||26===r[10]||10===r[11],"Texture missing KTX identifier, currently only supporting KTX containers");var n=new Int32Array(e,12,13),o=16909060===n[0],i=o?t(n[1]):n[1],a=o?t(n[4]):n[4],s=o?t(n[5]):n[5],c=o?t(n[6]):n[6],d=o?t(n[7]):n[7],u=o?t(n[8]):n[8],l=o?t(n[9]):n[9],m=o?t(n[10]):n[10],p=o?t(n[11]):n[11],g=o?t(n[12]):n[12];p=Math.max(1,p),assert(0!==d&&0===u,"Only 2D textures currently supported"),assert(0===l,"Texture arrays not currently supported");for(var f=[],h=64+g,E=c,S=d,b=p||1,w=0;w<b;w++){var x=new Int32Array(e,h,1)[0];h+=4;for(var _=0;_<m;_++){var y=new Uint8Array(e,h,x);f.push({data:y,height:S,width:E}),h+=x,h+=3-(x+3)%4}E=Math.max(1,.5*E),S=Math.max(1,.5*S)}return{baseInternalFormat:s,height:d,internalFormat:a,isCompressed:!i,isCubemap:6===m,mipmapCount:p,mipmaps:f,width:c}}})},e.loadJSON=function(t){return e.fetchItem(t).then(function(e){return e.json()}).catch(function(e){console.warn(e)})},e.loadText=function(t){return e.fetchItem(t).then(function(e){return e.text()}).catch(function(e){console.warn(e)})},e.loadVideo=function(t){return e.fetchItem(t).then(function(e){return e.blob()}).then(function(e){return new Promise(function(t,r){var n=document.createElement("video");n.preload="auto",n.autoplay=!1,n.playsinline=!0,IS_MEDIA_PRELOAD_SUPPORTED&&(n.addEventListener("canplaythrough",function e(){n.removeEventListener("canplaythrough",e),URL.revokeObjectURL(n.src),t(n)}),n.addEventListener("error",function e(){n.removeEventListener("error",e),URL.revokeObjectURL(n.src),r(n)})),n.src=URL.createObjectURL(e),IS_MEDIA_PRELOAD_SUPPORTED||(n.load(),t(n))})}).catch(function(e){console.warn(e)})},e.loadWebAssembly=function(t){return isWebAssemblySupported?window.WebAssembly.instantiateStreaming?window.WebAssembly.instantiateStreaming(e.fetchItem(t),t.loaderOptions.importObject):e.fetchItem(t).then(function(e){return e.arrayBuffer()}).then(function(e){return window.WebAssembly.instantiate(e,t.loaderOptions.importObject)}).catch(function(e){console.warn(e)}):(console.warn("WebAssembly is not supported"),Promise.resolve())},e.loadXML=function(t){if(!t.mimeType){var r=e.getFileExtension(t.src);t=__assign({},t,{mimeType:e.getMimeType(ELoaderKey.XML,r)})}return e.fetchItem(t).then(function(e){return e.text()}).then(function(r){if(t.mimeType)return e.domParser.parseFromString(r,t.mimeType)}).catch(function(e){console.warn(e)})},e}(),key$1={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},webkit$1=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],moz=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],ms$1=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],prefix$1="fullscreenEnabled"in document&&Object.keys(key$1)||webkit$1[0]in document&&webkit$1||moz[0]in document&&moz||ms$1[0]in document&&ms$1||[],fullScreen={requestFullscreen:function(e){return e[prefix$1[key$1.requestFullscreen]]()},get exitFullscreen(){return document[prefix$1[key$1.exitFullscreen]].bind(document)},addEventListener:function(e,t,r){return document.addEventListener(prefix$1[key$1[e]],t,r)},removeEventListener:function(e,t,r){return document.removeEventListener(prefix$1[key$1[e]],t,r)},get fullscreenSupported(){return Boolean(document[prefix$1[key$1.fullscreenEnabled]])},set fullscreenSupported(e){},get fullscreenElement(){return document[prefix$1[key$1.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return document[("on"+prefix$1[key$1.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return document[("on"+prefix$1[key$1.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return document[("on"+prefix$1[key$1.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){document[("on"+prefix$1[key$1.fullscreenerror]).toLowerCase()]=e}},key$2={pointerlockElement:0,requestPointerLock:1,exitPointerLock:2,pointerlockchange:3,pointerlockerror:4},webkit$2=["webkitPointerLockElement","webkitRequestPointerLock","webkitExitPointerLock","webkitpointerlockchange","webkitpointerlockerror"],moz$1=["mozPointerLockElement","mozRequestPointerLock","mozExitPointerLock","mozpointerlockchange","mozpointerlockerror"],ms$2=["msPointerLockElement","msRequestPointerLock","msExitPointerLock","mspointerlockchange","mspointerlockerror"],prefix$2="pointerLockElement"in document&&Object.keys(key$2)||webkit$2[0]in document&&webkit$2||moz$1[0]in document&&moz$1||ms$2[0]in document&&ms$2||[],pointerLock={requestPointerLock:function(e){return e[prefix$2[key$2.requestPointerLock]]()},get exitPointerLock(){return document[prefix$2[key$2.exitPointerLock]].bind(document)},addEventListener:function(e,t,r){return document.addEventListener(prefix$2[key$2[e]],t,r)},removeEventListener:function(e,t,r){return document.removeEventListener(prefix$2[key$2[e]],t,r)},get pointerlockEnabled(){return Boolean("pointerLockElement"in document||webkit$2[0]in document||moz$1[0]in document||ms$2[0]in document)},set pointerlockEnabled(e){},get pointerLockElement(){return document[prefix$2[key$2.pointerLockElement]]},set pointerLockElement(e){},get onpointerlockchange(){return document[("on"+prefix$2[key$2.pointerlockchange]).toLowerCase()]},set onpointerlockchange(e){return document[("on"+prefix$2[key$2.pointerlockchange]).toLowerCase()]=e},get onpointerlockerror(){return document[("on"+prefix$2[key$2.pointerlockerror]).toLowerCase()]},set onpointerlockerror(e){document[("on"+prefix$2[key$2.pointerlockerror]).toLowerCase()]=e}};exports.AssetLoader=AssetLoader,exports.EventEmitter=mitt,exports.PersistentCache=PersistentCache,exports.assert=assert,exports.convertArrayBufferToBlob=convertArrayBufferToBlob,exports.convertBlobToArrayBuffer=convertBlobToArrayBuffer,exports.createAudioContext=createAudioContext,exports.createUUID=createUUID,exports.debounce=debounce,exports.deleteCookie=deleteCookie,exports.eventEmitter=eventEmitter,exports.features=features,exports.fullScreen=fullScreen,exports.getCookie=getCookie,exports.getQueryParameters=getQueryParameters,exports.isAutoplayAllowed=isAutoplayAllowed,exports.listenToConnectionChange=listenToConnectionChange,exports.listenToOrientationChange=listenToOrientationChange,exports.listenToVisibilityChange=listenToVisibilityChange,exports.listenToWindowSizeChange=listenToWindowSizeChange,exports.pointerLock=pointerLock,exports.recordAnalyticsEvent=recordAnalyticsEvent,exports.registerAnalytics=registerAnalytics,exports.setCookie=setCookie,exports.stopListeningToConnectionChange=stopListeningToConnectionChange,exports.stopListeningToOrientationChange=stopListeningToOrientationChange,exports.stopListeningToVisibilityChange=stopListeningToVisibilityChange,exports.stopListeningToWindowSizeChange=stopListeningToWindowSizeChange,exports.unlockAutoplay=unlockAutoplay;
